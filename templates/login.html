<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/static/plugins/bootstrap-3.3.7-dist/css/bootstrap.css">
    <style>
        .hide{
            display: none;
        }
        .shadow{
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-color: black;
            opacity:0.4;
            z-index: 999;
        }
        .loading{
            position:fixed;
            width:124px;
            height:124px;
            left:50%;
            top:50%;
            margin-top: -62px;
            margin-left:-62px;
            z-index: 1000;
            background-image:url('/static/image/load.gif');
        }
    </style>
</head>
<body>
<div style="width: 600px;margin: 0 auto">
    <h1 style="margin-left:40%">用户登录界面</h1>
    <div style="margin-top:100px">
        <div class="form-horizontal">
          <div class="form-group" id="user_div">
            <label for="username" class="col-sm-2 control-label ">Username</label>
            <div class="col-sm-10" id="user_div_on">
              <input type="text" class="form-control" placeholder="Username" id="username" aria-describedby="inputSuccess2Status">
            </div>
          </div>
          <div class="form-group" id="psw_div">
            <label for="password" class="col-sm-2 control-label">Password</label>
            <div class="col-sm-10" id="psw_div_on">
              <input type="password" class="form-control" placeholder="Password" id="password">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <div class="checkbox">
                <label>
                  <input type="checkbox"> Remember me
                </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="button" class="btn btn-default" id="sign_btn">Sign in</button>
            </div>
            <label class="col-sm-2 control-label" id="message"></label>
          </div>
    </div>
    </div>

</div>

<div class="shadow hide"></div>
<div class="loading hide"></div>


<script src="/static/jquery-3.5.1.js"></script>
<script>
    $(function () {
        Bindinput();
        Bindsign_btn();
    })

    function Bindinput() {
        $('#username').blur(function () {
            if($('#username').val().length == 0){
                $('#user_div').addClass('has-error has-feedback');
                var tag = document.createElement('span');
                tag.classList.add('glyphicon', 'glyphicon-remove', 'form-control-feedback');
                tag.setAttribute('aria-hidden',"true");
                $('#user_div_on').append(tag);
            }else{
                $('#user_div').removeClass('has-error','has-feedback');
                $('#user_div').find('span').remove();
                $('#user_div').addClass('has-success has-feedback');
                var tag = document.createElement('span');
                tag.classList.add('glyphicon', 'glyphicon-ok', 'form-control-feedback');
                tag.setAttribute('aria-hidden',"true");
                $('#user_div_on').append(tag);
            }
        });
        $('#password').blur(function () {
            if($('#password').val().length == 0){
                $('#psw_div').addClass('has-error has-feedback');
                var tag = document.createElement('span');
                tag.classList.add('glyphicon', 'glyphicon-remove', 'form-control-feedback');
                tag.setAttribute('aria-hidden',"true");
                $('#psw_div_on').append(tag);
            }else{
                $('#psw_div').removeClass('has-error','has-feedback');
                $('#psw_div').find('span').remove();
                $('#psw_div').addClass('has-success has-feedback');
                var tag = document.createElement('span');
                tag.classList.add('glyphicon', 'glyphicon-ok', 'form-control-feedback');
                tag.setAttribute('aria-hidden',"true");
                $('#psw_div_on').append(tag);
            }
        })
    }

    function Bindsign_btn() {
        $('#sign_btn').click(function () {
            $('.shadow .loading').removeClass('hide');
            $.ajax({
                url:'//',
                type:'POST',
                dataType:'JSON',
                data:{'username':$('#username').val(),'password':$('#password').val()}
                success:function (arg) {
                    if(arg.status){
                        location.href('/management/');
                    }else{
                        $('#message').text(arg.message);
                    }
                }
            })
        });
    }

</script>
</body>
</html>